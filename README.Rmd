---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
```

# mpitb: a toolbox for estimating multidimensional poverty indices in R

<!-- badges: start -->
<!-- badges: end -->

The goal of this package is to ...

## Installation

You can install the development version of mpitb from [GitHub](https://github.com/) with:

``` r
# install.packages("devtools")
devtools::install_github("girelaignacio/mpitb")
```
This process may take time the first time. 

## Example

This is a basic example which shows you how calculate the Multidimensional Poverty Index:

#### Getting started

Load the `"swz_mics14"` dataset from the package. See the structure of the variables. 

```{r example}
library(mpitb)
## Use swz_mics14 data
head(swz_mics14)
```

We are going to estimate poverty disaggregated by different population subgroups: Region and Area. Please note that if we see the structure of this data, `Region` and ``Area`` are `Factor`.

```{r strdata}
str(swz_mics14)
```

#### The first step

Specify the household survey design with `survey` R package and other arguments to be used in the settings of our estimation of the MPI. 

```{r step1}
## Configurate the survey design 
data <- survey::svydesign(id=~PSU, weights = ~Weight , strata = ~Strata, data = swz_mics14)
class(data)
```

#### The second step

Specify the set of parameters for our estimation of the MPI with `mpitb.set` function. This function create a object of `mpitb_set` class containing all the information that will be used in further functions for calculating different AF measures.

Apart from our `data` object, parameters of `mpitb.set` function include `indicators`, `cutoffs`, `weights` and other optional arguments: `over` is the vector of the groups, `name` and `desc` are for specifying a personal name and description of your setting. 

```{r step2}
indicators <- c("Water","Assets","School","Nutrition")
weights <- c(1/3,1/3,1/6,1/6)
cutoff <- c(25)
over <- c("Region","Area")
set <- mpitb.set(data, indicators, cutoff, weights, over, name = "SWZ2014 Example", desc = "This is an example taken from the OPHI Summer School 2022")
print(set)
```

It is also possible to view a summery of our settings where further information can be observed such as the uncensored headcount ratios of the indicators. 

```{r structure set1}
#summary(set1)
```

#### Estimate the Adjusted Headcount Ratio, Incidence and Intensity of Poverty

```{r estimate-measures}
#M0 <- mpitb.M0(set1)
#H <- mpitb.H(set1)
#A <- mpitb.A(set1)
```
